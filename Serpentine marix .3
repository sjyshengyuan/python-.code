def generate_snake_matrix(n):
  
    matrix = [[0] * n for _ in range(n)]
    
    
    directions = [(0, 1), (1, 0), (0, -1), (-1, 0)]
   
    direction_index = 0
    
    row, col = 0, 0

    d_row, d_col = directions[direction_index]
    
    
    for num in range(1, n*n + 1):
        matrix[row][col] = num
    
        next_row, next_col = row + d_row, col + d_col
      
        if next_row < 0 or next_row >= n or next_col < 0 or next_col >= n or matrix[next_row][next_col] != 0:
           
            direction_index = (direction_index + 1) % 4
            d_row, d_col = directions[direction_index]

        row, col = row + d_row, col + d_col
    
    return matrix


def print_matrix(matrix):
    for row in matrix:
        print(" ".join(str(x).rjust(4) for x in row))


snake_matrix = generate_snake_matrix(5)
print_matrix(snake_matrix)
